"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var UserImages=function(){function e(){var n=this;_classCallCheck(this,e),this._userEmail=null,this._chosenImages=new Array,this.init=function(){var e,t=document.querySelector(".email--button"),a=document.querySelector(".image--attach-button"),r=createValidator();t.addEventListener("click",function(){(e=r())&&"empty"!==e&&(document.querySelector(".image--attach-button").classList.remove("button-inactive"),n._userEmail&&e.toUpperCase()!==n._userEmail.toUpperCase()&&0<n._chosenImages.length?confirm("Your images are currently linked to ".concat(n._userEmail," - if you pass a new email address you'll lose any saved images. Are you sure you want to continue?"))&&n.resetGallery(e):n.updateUserEmail(e))}),a.addEventListener("click",function(){n._userEmail&&n.addGalleryItem()})},this.init()}return _createClass(e,[{key:"addGalleryItem",value:function(){var e,t,a,r=this,n=currentImageObject.id;0<=this._chosenImages.indexOf(n)||(e=currentImageObject.download_url,t=document.querySelector(".gallery"),(a=document.createElement("figure")).classList.add("gallery--item"),a.innerHTML='\n                <div class="gallery--img-wrapper">\n                    <img src="'.concat(e,'" class="gallery--img fade-in" />\n                </div>\n                <div class="gallery--item-remove">\n                    <i class="fas fa-times"></i>\n                </div>'),t.insertBefore(a,document.querySelector(".gallery--item-spacer")),this._chosenImages.push(n),a.querySelector(".gallery--item-remove").addEventListener("click",function(e){e=e.target.parentNode.parentNode;e.parentNode.removeChild(e);e=r._chosenImages.indexOf(n);r._chosenImages.splice(e,1)}))}},{key:"resetGallery",value:function(e){this.updateUserEmail(e),this._chosenImages=[];for(var t=document.getElementsByClassName("gallery--item"),a=0;a<t.length;a++)t[a].classList.toggle("fade-out");setTimeout(function(){for(var e=t.length-1;0<=e;e--)t[e].parentNode.removeChild(t[e])},300)}},{key:"updateUserEmail",value:function(e){this._userEmail=e;var t=document.querySelector(".email--validation-copy");t.style.color="#fefefe",t.innerHTML="Attaching to ".concat(e.toLowerCase())}}]),e}();