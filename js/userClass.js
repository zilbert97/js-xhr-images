"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var UserImages=function(){function e(){_classCallCheck(this,e),this.userEmail=null,this.chosenImages=new Array,this.init=function(){var e,t=this,a=document.querySelector(".email--button"),n=document.querySelector(".image--attach-button"),r=createValidator();a.addEventListener("click",function(){(e=r())&&"empty"!==e&&(document.querySelector(".image--attach-button").classList.remove("button-inactive"),t.userEmail&&e.toUpperCase()!==t.userEmail.toUpperCase()&&0<t.chosenImages.length?confirm("Your images are currently linked to ".concat(t.userEmail," - if you pass a new email address you'll lose any saved images. Are you sure you want to continue?"))&&t.resetGallery(e):t.updateUserEmail(e))}),n.addEventListener("click",function(){t.userEmail&&t.addGalleryItem()})},this.init()}return _createClass(e,[{key:"addGalleryItem",value:function(){var e,t,a,n=this,r=document.cookie.split("; ").find(function(e){return e.startsWith("currentImage_id=")}).split("=")[1];0<=this.chosenImages.indexOf(r)||(e=document.cookie.split("; ").find(function(e){return e.startsWith("currentImage_download_url=")}).split("=")[1],t=document.querySelector(".gallery"),(a=document.createElement("figure")).classList.add("gallery--item"),a.innerHTML='\n                <div class="gallery--img-wrapper">\n                    <img src="'.concat(e,'" class="gallery--img fade-in" />\n                </div>\n                <div class="gallery--item-remove">\n                    <i class="fas fa-times"></i>\n                </div>'),t.insertBefore(a,document.querySelector(".gallery--item-spacer")),this.chosenImages.push(r),a.querySelector(".gallery--item-remove").addEventListener("click",function(e){e=e.target.parentNode.parentNode;e.parentNode.removeChild(e);e=n.chosenImages.indexOf(r);n.chosenImages.splice(e,1)}))}},{key:"resetGallery",value:function(e){this.updateUserEmail(e),this.chosenImages=[];for(var t=document.getElementsByClassName("gallery--item"),a=0;a<t.length;a++)t[a].classList.toggle("fade-out");setTimeout(function(){for(var e=t.length-1;0<=e;e--)t[e].parentNode.removeChild(t[e])},300)}},{key:"updateUserEmail",value:function(e){this.userEmail=e;var t=document.querySelector(".email--validation-copy");t.style.color="#fefefe",t.innerHTML="Attaching to ".concat(e.toLowerCase())}}]),e}();